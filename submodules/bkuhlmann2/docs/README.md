Shell scripts for customized macOS machine setup and configuration.

This project provides a highly opinionated default configuration built
upon the [macOS](https://www.alchemists.io/projects/mac_os) project.
Should the configuration provided by this project not be to your liking,
feel free to fork and customize for your specific needs.

Features {#_features}
========

Due to the amount of tooling used, the following features are broken
down into subsections for easier navigation.

Homebrew Formulas {#_homebrew_formulas}
========

Installs the following [formulas](https://brew.sh):

-   [asciinema](https://asciinema.org)

-   [Bash](https://www.gnu.org/software/bash)

-   [Bash Completion](http://bash-completion.alioth.debian.org)

-   [Bat](https://github.com/sharkdp/bat)

-   [blueutil](https://github.com/toy/blueutil)

-   [croc](https://github.com/schollz/croc)

-   [Crystal](https://crystal-lang.org)

-   [CTags](http://ctags.sourceforge.net)

-   [Dagger](https://dagger.io)

-   [direnv](https://direnv.net)

-   [Dive](https://github.com/wagoodman/dive)

-   [dog](https://dns.lookup.dog)

-   [duf](https://github.com/muesli/duf)

-   [duti](http://duti.org)

-   [Entr](https://eradman.com/entrproject)

-   [Exa](https://the.exa.website)

-   [ExifTool](https://exiftool.org/index.html)

-   [fd](https://github.com/sharkdp/fd)

-   [FLAC](https://www.xiph.org/flac)

-   [Frum](https://github.com/tako8ki/frum)

-   [Fast Node Manager](https://github.com/Schniz/fnm)

-   [FZF](https://github.com/junegunn/fzf)

-   [Git](https://git-scm.com)

-   [Git Delta](https://github.com/dandavison/delta)

-   [Git Filter Repo](https://github.com/newren/git-filter-repo)

-   [Git Sizer](https://github.com/github/git-sizer)

-   [GPG](https://www.gnupg.org)

-   [gping](https://github.com/orf/gping)

-   [Graphics Magick](http://www.graphicsmagick.org)

-   [Graphviz](https://www.graphviz.org)

-   [hexyl](https://github.com/sharkdp/hexyl)

-   [Highlight](http://www.andre-simon.de/doku/highlight/en/highlight.php)

-   [hr](https://github.com/LuRsT/hr)

-   [htmlq](https://github.com/mgdm/htmlq)

-   [htop](https://hisham.hm/htop)

-   [HTTPie](https://github.com/jkbrzt/httpie)

-   [HTTP Stat](https://github.com/reorx/httpstat)

-   [Hyperfine](https://github.com/sharkdp/hyperfine)

-   [Ioping](https://github.com/koct9i/ioping)

-   [jq](https://stedolan.github.io/jq)

-   [lnav](https://lnav.org)

-   [Lynis](https://github.com/CISOfy/lynis)

-   [Mac App Store](https://github.com/mas-cli/mas)

-   [Minisign](https://jedisct1.github.io/minisign)

-   [mitmproxy](https://mitmproxy.org)

-   [NCurses Disk Usage](https://dev.yorhel.nl/ncdu)

-   [Node.js](https://nodejs.org)

-   [Noti](https://github.com/variadico/noti)

-   [Nushell](https://github.com/nushell/nushell)

-   [Oha](https://github.com/hatoo/oha)

-   [OpenSSH](https://www.openssh.com)

-   [OpenSSL](https://openssl.org)

-   [Overmind](https://github.com/DarthSim/overmind)

-   [Pandoc](https://pandoc.org)

-   [Parallel](https://savannah.gnu.org/projects/parallel)

-   [Pastel](https://github.com/sharkdp/pastel)

-   [pgcli](https://www.pgcli.com)

-   [Pigz](https://www.zlib.net/pigz)

-   [Pinentry](https://github.com/GPGTools/pinentry)

-   [PostgreSQL](https://www.postgresql.org)

-   [Procs](https://github.com/dalance/procs)

-   [Readline](https://tiswww.case.edu/php/chet/readline/rltop.html)

-   [Redis](http://redis.io)

-   [ripgrep](https://github.com/BurntSushi/ripgrep)

-   [ShellCheck](https://github.com/koalaman/shellcheck)

-   [Siege](https://www.joedog.org/siege-home)

-   [Sleepwatcher](https://www.bernhard-baehr.de)

-   [Tarsnap](https://www.tarsnap.com)

-   [Tealdeer](https://github.com/dbrgn/tealdeer)

-   [Terraform](https://www.terraform.io)

-   [The Silver Surfer](https://github.com/ggreer/the_silver_searcher)

-   [tmux](https://github.com/tmux/tmux/wiki)

-   [Tokie](https://github.com/XAMPPRocky/tokei)

-   [Viddy](https://github.com/sachaos/viddy)

-   [Vim](https://www.vim.org)

-   [Watch](https://gitlab.com/procps-ng/procps)

-   [Websocat](https://github.com/vi/websocat)

-   [xsv](https://github.com/BurntSushi/xsv)

-   [Yank](https://github.com/mptre/yank)

-   [YubiKey Manager CLI](https://developers.yubico.com/yubikey-manager)

-   [Zoxide](https://github.com/ajeetdsouza/zoxide)

Homebrew Casks {#_homebrew_casks}
========

Installs the following [casks](https://brew.sh):

-   [Alfred](https://www.alfredapp.com)

-   [App Cleaner](https://freemacsoft.net/appcleaner)

-   [Audio Hijack](https://www.rogueamoeba.com/audiohijack)

-   [Balena Etcher](https://www.balena.io/etcher)

-   [Bartender](https://www.macbartender.com)

-   [Carbon Copy Cloner](https://bombich.com)

-   [CleanShot](https://getcleanshot.com)

-   [ClipGrab](https://clipgrab.org)

-   [Dash](https://kapeli.com/dash)

-   [Discord](https://discord.com)

-   [Doxie](https://www.getdoxie.com)

-   [Dropbox](https://www.dropbox.com)

-   [Firefox](https://www.mozilla.com/en-US/firefox)

-   [Fission](https://www.rogueamoeba.com/fission)

-   [Google Chrome](https://www.google.com/chrome)

-   [Hazel](https://www.noodlesoft.com)

-   [IINA](https://iina.io)

-   [ImageOptim](http://imageoptim.pornel.net)

-   [iStat Menus](https://bjango.com/mac/istatmenus)

-   [iTerm2](https://www.iterm2.com)

-   [ksdiff](https://www.kaleidoscopeapp.com/ksdiff2)

-   [Logseq](https://logseq.com)

-   [Mockuuups Studio](https://mockuuups.studio)

-   [Muzzle](https://muzzleapp.com)

-   [NewNewsWire](https://netnewswire.com)

-   [Ngrok](https://ngrok.com)

-   [Numi](https://numi.app)

-   [Obsidian](https://obsidian.md)

-   [OpenOffice](https://www.openoffice.org)

-   [OWASP Zed Attack Proxy
    (ZAP)](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)

-   [Path Finder](https://cocoatech.com)

-   [Paw](https://paw.cloud)

-   [pgAdmin](https://www.pgadmin.org)

-   [Pika](https://superhighfives.com/pika)

-   [PixelSnap](https://getpixelsnap.com)

-   [ProtonVPN](https://protonvpn.com)

-   [Resolutionator](https://manytricks.com/resolutionator)

-   [Retrobatch](https://flyingmeat.com/retrobatch)

-   [Signal](https://signal.org)

-   [Sublime Text](https://www.sublimetext.com)

-   [Transmit](https://panic.com/transmit)

-   [Twist](https://twist.com)

-   [Viscosity](https://www.sparklabs.com/viscosity)

-   [Visual Studio Code](https://code.visualstudio.com)

App Store Applications {#_app_store_applications}
========

Installs the following [App Store](https://www.apple.com/app-store)
applications:

-   [1Password](https://1password.com)

-   [Acorn](https://secure.flyingmeat.com/acorn)

-   [AquaPath](https://itunes.apple.com/us/app/aquapath/id424425207)

-   [DaisyDisk](https://daisydiskapp.com)

-   [GarageBand](https://www.apple.com/mac/garageband)

-   [Hand Mirror](https://handmirror.app)

-   [iMovie](https://www.apple.com/imovie)

-   [Key Codes](https://manytricks.com/keycodes)

-   [Keymou](https://manytricks.com/keymou)

-   [Keynote](https://www.apple.com/keynote)

-   [Kindle](http://www.amazon.com/gp/feature.html?docId=1000464931)

-   [Leech](https://manytricks.com/leech)

-   [LimeChat](http://limechat.net/mac)

-   [Marked 2](https://marked2app.com)

-   [Medis](http://getmedis.com)

-   [Meeter](https://trymeeter.com)

-   [MindNode](https://mindnode.com)

-   [MoneyWell](https://nothirst.com)

-   [Moom](https://manytricks.com/moom)

-   [Name Mangler](https://manytricks.com/namemangler)

-   [Numbers](https://www.apple.com/numbers)

-   [OmniFocus](https://www.omnigroup.com/omnifocus)

-   [Pages](https://www.apple.com/pages)

-   [Patterns](https://krillapps.com/patterns)

-   [Permute](https://software.charliemonroe.net/permute)

-   [Pixelmator](https://www.pixelmator.com)

-   [Paletter](https://apps.apple.com/app/apple-store/id1494948845)

-   [Primitive](https://primitive.lol)

-   [Sequence
    Diagram](https://apps.apple.com/gb/app/sequence-diagram/id1195426709)

-   [Shapes](https://shapesapp.com)

-   [Shush](https://mizage.com/shush)

-   [Slack](https://slack.com)

-   [WiFi Explorer](https://www.adriangranados.com)

Non-App Store Applications {#_non_app_store_applications}
========

Installs the following macOS applications which are not located in the
App Store:

-   [Elm](https://elm-lang.org)

-   [Docker](https://www.docker.com)

-   [Kaleidoscope](https://www.kaleidoscopeapp.com)

-   [Sonos](https://www.sonos.com)

Application Extensions {#_application_extensions}
========

Installs the following extensions to existing applications:

-   [Vim Bundler](https://github.com/tpope/vim-bundler)

-   [Vim Commentary](https://github.com/tpope/vim-commentary)

-   [Vim Fugitive](https://github.com/tpope/vim-fugitive)

-   [Vim Git Gutter](https://github.com/airblade/vim-gitgutter)

-   [Vim Pathogen](https://github.com/tpope/vim-pathogen)

-   [Vim Projectionist](https://github.com/tpope/vim-projectionist)

-   [Vim Rails](https://github.com/tpope/vim-rails)

-   [Vim Ruby](https://github.com/vim-ruby/vim-ruby)

-   [Vim Splitjoin](https://github.com/AndrewRadev/splitjoin.vim)

-   [Vim Text Object User](https://github.com/kana/vim-textobj-user)

-   [Vim Unimpaired](https://github.com/tpope/vim-unimpaired)

Node Packages {#_node_packages}
========

Installs the following [Node](https://nodejs.org)
[packages](https://www.npmjs.com):

-   [Elm Live](https://github.com/tomekwi/elm-live)

-   [Elm Test](https://github.com/elm-explorations/test)

Ruby Gems {#_ruby_gems}
========

Installs the following [Ruby](https://www.ruby-lang.org)
[gems](https://rubygems.org):

-   [Amazing Print](https://github.com/amazing-print/amazing_print)

-   [ASCII Doctor](https://asciidoctor.org)

-   [Benchmark IPS](https://github.com/evanphx/benchmark-ips)

-   [Bundler Stats](https://github.com/jmmastey/bundler-stats)

-   [BundleUp](https://github.com/mattbrictson/bundleup)

-   [Caliber](https://www.alchemists.io/projects/caliber)

-   [Debug](https://github.com/ruby/debug)

-   [Flacsmith](https://www.alchemists.io/projects/flacsmith)

-   [Gemsmith](https://www.alchemists.io/projects/gemsmith)

-   [Git Lint](https://www.alchemists.io/projects/git-lint)

-   [Hanami](https://hanamirb.org)

-   [Libyear (Bundler)](https://github.com/jaredbeck/libyear-bundler)

-   [Pennyworth](https://www.alchemists.io/projects/pennyworth)

-   [Pessimize](https://github.com/joonty/pessimize)

-   [Pragmater](https://www.alchemists.io/projects/pragmater)

-   [Ruby on Rails](https://rubyonrails.org)

-   [Rake](https://github.com/ruby/rake)

-   [Reek](https://github.com/troessner/reek)

-   [RSpec](https://rspec.info)

-   [Rubysmith](https://www.alchemists.io/projects/rubysmith)

-   [Solargraph](https://solargraph.org/guides)

-   [Sublime Text
    Kit](https://www.alchemists.io/projects/sublime_text_kit)

-   [YouPlot](https://github.com/red-data-tools/YouPlot)

Rust Crates {#_rust_crates}
========

Installs the following [Rust](https://www.rust-lang.org)
[crates](https://crates.io):

-   [jless](https://jless.io)

-   [Silicon](https://github.com/Aloxaf/silicon)

Requirements {#_requirements}
============

1.  Apple Silicon hardware.

2.  [macOS](https://www.alchemists.io/projects/mac_os)

3.  [Xcode](https://developer.apple.com/xcode)

Setup {#_setup}
=====

To install, run:

``` {.bash}
-—
git clone https://github.com/bkuhlmann/mac_os-config.git
cd mac_os-config
git checkout 22.4.0
-—
```

Usage {#_usage}
=====

The following will walk you through the steps of
installing/re-installing your machine.

Pre-Install {#_pre_install}
————

Ensure you have the following in place for your Silicon machine:

1.  Ensure a backup of your Apple, NAS, backup image, and Dropbox
    credentials are available.

2.  Ensure a recent backup of your machine exists and works properly.

3.  Ensure [Startup Security
    Utility](https://support.apple.com/en-us/HT208198) is disabled.

    a.  Turn off your machine.

    b.  Start your machine by pressing and holding the `POWER` button
        until you see startup options being loaded.

    c.  Select Utilities → Startup Security Utility from the main menu.

    d.  Select *Reduced Security*.

    e.  Quit the utility and restart the machine.

Install {#_install}
========

1.  Create a [macOS Boot
    Disk](https://www.alchemists.io/projects/mac_os/#_boot_disk) and
    follow instructions.

2.  Ensure latest software updates are applied per [macOS
    Requirements](https://www.alchemists.io/projects/mac_os/#_requirements).

3.  Ensure Xcode is installed per [macOS
    Requirements](https://www.alchemists.io/projects/mac_os/#_requirements).

4.  Run [macOS
    Install](https://www.alchemists.io/projects/mac_os#_usage) and
    follow all prompts.

Post-Install {#_post_install}
========

The following are additional steps, not easily automated, that are worth
completing after the install scripts have completed:

-   System Preferences

    -   Apple ID

        -   Configure iCloud.

        -   Enable Find My Mac.

    -   Security & Privacy

        -   General

            -   Require password immediately after sleep or screen saver
                begins.

            -   Enable message when screen is locked. Example:
                `+<url> | <email> | <phone>+`.

            -   Allow your Apple Watch to unlock your Mac.

        -   FileVault

            -   Enable FileVault and save the recovery key in a secure
                location (i.e. 1Password).

        -   Firewall

            -   Enable.

            -   Automatically allow signed software.

            -   Enable stealth mode.

    -   Internet Accounts

        -   Add all accounts.

    -   Touch ID

        -   Rename fingerprint.

    -   Keyboard

        -   Keyboard

            -   Slide *Key Repeat* to *Fast* (max).

            -   Slide *Delay Until Repeat* to *Short* (max).

        -   Shortcuts

            -   Select *Launchpad and Dock* and uncheck *Turn Dock
                Hiding On/Off*.

            -   Select *Mission Control* and assign
                `CONTROL + OPTION + COMMAND + N` to *Show Notification
                Center*.

            -   Select *Screenshots* and uncheck all boxes.

            -   Select *Spotlight* and uncheck all boxes.

    -   Desktop and Screen Saver

        -   Select *Desktop*, click `+`, and choose custom image.

        -   Select *Screen Saver*, select *Message*, enter custom
            message, start after 10 minutes, and check *show with
            clock*.

    -   Bluetooth

        -   Reconnect keyboard, mouse, and earbuds.

    -   Network

        -   Configure Wi-Fi.

    -   Printers & Scanners

        -   Add printer/scanner.

    -   Users & Groups

        -   Update avatar image.

        -   Remove unused login items.

        -   Disable guest account.

    -   Wallet and Apple Pay

        -   Reenable all accounts and assign default card.

    -   Sound

        -   Sound Effects

            -   Uncheck *Play sound on startup*.

            -   Uncheck *Play user interface sound effects*.

        -   Battery

            -   Click on *Battery* and uncheck *Show battery status in
                menu bar*.

            -   Click on *Power Adapter* and check *Prevent computer
                from sleeping automatically when the display is off*.

    -   Notifications

        -   Do Not Disturb

            -   Enable *Do Not Disturb* from 9pm to 7am.

            -   Enable *When display is sleeping*.

            -   Enable *When screen is locked*.

            -   Enable *When mirroring*.

            -   Disable *Allow calls from everyone*.

            -   Enable allow repeated calls.

        -   Applications

            -   Select *Banners* for all apps.

            -   Disable *Show notifications on lock screen*.

            -   Disable *Play sounds for notifications*.

-   iStat Menus

    -   Double click, within the Applications folder, to install as a
        system preference.

-   Carbon Copy Cloner

    -   Rename old backup, create new backup, and set frequency
        schedule.

Keyboard Shortcuts {#_keyboard_shortcuts}
========

Several applications provide global hotkey support. These are the
associations I use (which are also captured in the `+restore.bom+` as
well):

-   **COMMAND + SPACE (hold):** Siri (open)

-   **COMMAND + SPACE:** Spotlight (open)

-   [CleanShot](https://www.alchemists.io/articles/clean_shot/#_shortcuts) -
    See article for details.

-   **CONTROL + OPTION + COMMAND + b:** Bartender (hidden menu toggle)

-   **CONTROL + OPTION + COMMAND + c:** Pika (copy color)

-   **CONTROL + OPTION + COMMAND + d:** Alfred Define (use OPTION to
    open Dictionary)

-   **CONTROL + OPTION + COMMAND + h:** Alfred Highlight Syntax

-   **CONTROL + OPTION + COMMAND + k:** Keymou (cursor highlight
    show/hide)

-   **CONTROL + OPTION + COMMAND + m:** Moom (show/hide)

-   **CONTROL + OPTION + COMMAND + n:** Notification Center (show/hide)

-   **CONTROL + OPTION + COMMAND + o:** Alfred Open URL in default
    browser

-   [PixelSnap](https://www.alchemists.io/articles/pixel_snap/#_shortcuts) -
    See article for details.

-   **CONTROL + OPTION + COMMAND + r:** Resolutionator (selector)

-   **CONTROL + OPTION + COMMAND + t:** Alfred Large Type

-   **CONTROL + OPTION + COMMAND + w:** Mission Control

-   **CONTROL + OPTION + COMMAND + ←:** Keymou (move cursor left)

-   **CONTROL + OPTION + COMMAND + ↑:** Keymou (move cursor up)

-   **CONTROL + OPTION + COMMAND + →:** Keymou (move cursor right)

-   **CONTROL + OPTION + COMMAND + ↓:** Keymou (move cursor down)

-   **CONTROL + OPTION + COMMAND + ENTER:** Keymou (move cursor by
    division)

-   **CONTROL + OPTION + SPACE:** OmniFocus (quick entry)

-   **OPTION + SPACE:** Alfred (open)

Newsyslog {#_newsyslog}
========

Native to macOS,
[newsyslog](https://www.freebsd.org/cgi/man.cgi?newsyslog.conf(5)) can
be used to configure system-wide log rotation across multiple projects.
It’s a good recommendation to set this up so that disk space is
carefully maintained. Here’s how to configure it for your system, start
by creating a configuration for your projects in the
`+/etc/newsyslog.d+` directory. In my case, I use the following
configurations:

-   `+/etc/newsyslog.d/alchemists.conf+`

          # logfilename                                            [owner:group]    mode   count   size  when  flags
          /Users/bkuhlmann/Dropbox/Development/Work/**/log/*.log                    644    2       5120  *     GJN

-   `+/etc/newsyslog.d/homebrew.conf+`

          # logfilename                   [owner:group]    mode   count   size    when  flags
          /usr/local/var/log/**/*.log                      644    2       5120    *     GJN

These configurations ensure that logs are rotated every 5MB (5120KB). In
order to test that these configurations are valid, run:

    sudo newsyslog -nvv

If you don’t see any errors in the output, then your configuration
settings are correct.

The last thing to do is to add a launch configuration to ensure the log
rotations happen at regularly scheduled intervals. To do this create the
following file:
`+$HOME/Library/LaunchAgents/com.apple.newsyslog.plist+`. It should have
the following content:

``` {.xml}
-—
<?xml version=“1.0” encoding=“UTF-8”?>
<!DOCTYPE plist PUBLIC “-//Apple Computer//DTD PLIST 1.0//EN” “https://www.apple.com/DTDs/PropertyList-1.0.dtd”>
<plist version=“1.0”>
<dict>
  <key>Label</key>
  <string>com.apple.newsyslog</string>
  <key>ProgramArguments</key>
  <array>
    <string>/usr/sbin/newsyslog</string>
  </array>
  <key>LowPriorityIO</key>
  <true/>
  <key>Nice</key>
  <integer>1</integer>
  <key>StartCalendarInterval</key>
  <dict>
    <key>Minute</key>
    <integer>30</integer>
  </dict>
</dict>
</plist>
-—
```

That’s it. System-wide log rotation is setup for your projects.

Customization {#_customization}
========

While this project’s configuration is opinionated and tailored for my
setup, you can easily fork this project and customize it for your
environment. Start by editing the files found in the `+bin+` and `+lib+`
directories. Check out the [macOS Customization
Documentation](https://www.alchemists.io/projects/mac_os/#_customization)
for further details.

*TIP*: The installer determines which applications/extensions to install
as defined in the `+settings.sh+` script. Applications defined with the
“`APP_NAME`” suffix and extensions defined with the “`EXTENSION_PATH`”
suffix inform the installer what to care about. Removing/commenting out
these applications/extensions within the `+settings.sh+` file will cause
the installer to skip these applications/extensions.

Development {#_development}
===========

To contribute, run:

``` {.bash}
-—
git clone https://github.com/bkuhlmann/mac_os-config.git
cd mac_os-config
-—
```

[License](https://www.alchemists.io/policies/license) {#_ulink_url_https_www_alchemists_io_policies_license_license_ulink}
=====================================================

[Security](https://www.alchemists.io/policies/security) {#_ulink_url_https_www_alchemists_io_policies_security_security_ulink}
=======================================================

[Code of Conduct](https://www.alchemists.io/policies/code_of_conduct) {#_ulink_url_https_www_alchemists_io_policies_code_of_conduct_code_of_conduct_ulink}
=====================================================================

[Contributions](https://www.alchemists.io/policies/contributions) {#_ulink_url_https_www_alchemists_io_policies_contributions_contributions_ulink}
=================================================================

[Versions](https://www.alchemists.io/projects/mac_os-config/versions) {#_ulink_url_https_www_alchemists_io_projects_mac_os_config_versions_versions_ulink}
=====================================================================

[Community](https://www.alchemists.io/community) {#_ulink_url_https_www_alchemists_io_community_community_ulink}
================================================

Credits {#_credits}
=======

Engineered by [Brooke
Kuhlmann](https://www.alchemists.io/team/brooke_kuhlmann).
